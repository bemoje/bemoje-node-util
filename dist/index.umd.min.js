/*!
 * @bemoje/node-util v0.1.3
 * (c) Benjamin MÃ¸ller Jensen
 * Homepage: https://github.com/bemoje/bemoje-node-util
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("timsort"),require("sentence-splitter"),require("lodash"),require("crypto"),require("date-and-time"),require("dotenv/config"),require("openai"),require("fs"),require("path"),require("format-number"),require("stream"),require("winston"),require("cli-color")):"function"==typeof define&&define.amd?define(["exports","timsort","sentence-splitter","lodash","crypto","date-and-time","dotenv/config","openai","fs","path","format-number","stream","winston","cli-color"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).util={},e.timsort,e.sentenceSplitter,e.lodash,e.crypto,e.date,null,e.openai$1,e.fs,e.path,e.numberFormat,e.stream,e.winston,e.clc)}(this,(function(e,t,r,n,o,s,i,a,u,l,c,h,f,d){"use strict";function _interopDefaultLegacy(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var m=_interopDefaultLegacy(s),p=_interopDefaultLegacy(u),g=_interopDefaultLegacy(l),w=_interopDefaultLegacy(c),y=_interopDefaultLegacy(f),b=_interopDefaultLegacy(d);function arr2dToCSV(e,t=";"){return e.map((e=>e.join(t))).join("\n")}function arrAssignFrom(e,t){e.splice(t.length);for(let r=0;r<t.length;r++)e[r]=t[r];return e}function arrEvery(e,t){for(let r=0,n=e.length;r<n;r++)if(!1===t(e[r],r,e))return!1;return!0}function intToArrayBytes(e){if(e<256)return[e];const t=new Uint8Array(new Uint32Array([e]).buffer);return e<65536?[t[0],t[1]]:e<16777216?[t[0],t[1],t[2]]:e<4294967296?[t[0],t[1],t[2],t[3]]:[256,256,256,256]}function isObject(e){return null!==e&&"object"==typeof e}function isPrototype(e){return!!isObject(e)&&("constructor"in e&&e.constructor.prototype===e)}function isConstructor(e){return"function"==typeof e&&"prototype"in e&&isPrototype(e.prototype)&&e===e.prototype.constructor}function isNumericString(e){const t=Number(e.trim());return!isNaN(t)&&isFinite(t)}function*iteratePrototypeChain(e){if(null==e)return;isPrototype(e)||isConstructor(e)||e===Function.prototype||(yield e,e=e.constructor.prototype);let t=e;for(;t;)yield t,t=Reflect.getPrototypeOf(t)}function setNonEnumerable(e,...t){if(!e||"object"!=typeof e)throw new Error("setValueAsGetter() requires an object as the first argument.");for(const r of t){if(!Object.hasOwn(e,r))throw new Error(`Property '${r}' does not exist on object.`);const t=Object.getOwnPropertyDescriptor(e,r);if(!t)throw new Error(`Property '${r}' does not have a descriptor.`);t.enumerable=!1,Object.defineProperty(e,r,t)}}function setNonEnumerablePrivateProperties(e){setNonEnumerable(e,...Object.keys(e).filter((e=>"_"===e.charAt(0))))}function inheritStaticMembers(e,t,r=[]){const n=new Set([...Reflect.ownKeys(e),...r,"prototype","name","constructor"]);for(const r of Reflect.ownKeys(t)){if(n.has(r))continue;const o=Object.getOwnPropertyDescriptor(t,r);o&&Object.defineProperty(e,r,o)}return e}const x=new Map;x.set("IRevivable",[["toJSON"],["fromJSON"]]),x.set("IOptions",[["options","defaultOptions","handleOptions"],["defaultOptions"]]);const S=new WeakSet;class Base{constructor(e){}get klass(){return Object.getPrototypeOf(this).constructor}get proto(){return Object.getPrototypeOf(this)}init(){S.has(this.constructor)||(S.add(this.constructor),this.inheritAllStatic(),this.checkInterfaces())}inheritAllStatic(){const e=[...iteratePrototypeChain(this.klass)].reverse();for(const t of e)"object"!=typeof t&&Object.hasOwn(t,"prototype")&&inheritStaticMembers(this.klass,t)}checkInterfaces(){for(const[e,[t,r]]of x)this.hasInterfaceInstanceMembers(t)&&this.assertInterfaceStaticMembers(e,r)}hasInterfaceInstanceMembers(e){return e.length===e.filter((e=>e in this)).length}assertInterfaceStaticMembers(e,t){for(const r of t)if(!Object.hasOwn(this.constructor,r))throw new Error(`Interface ${e} requires class ${this.constructor.name} to implement static member: ${r}`)}setNonEnumerablePrivateProperties(){setNonEnumerablePrivateProperties(this)}assertNoAmbiguousOptions(e,t){for(const[r,n]of t)if(void 0!==e[r]&&void 0!==e[n])throw new Error(`Cannot use the '${r}' option and the '${n}' option simultanously.`)}assertNoOptionsRequireMissingOptions(e,t){for(const[r,n]of t)if(void 0!==e[r]&&void 0===e[n])throw new Error(`Cannot use the '${r}' option without the '${n}' option.`)}}class Matrix{matrix;immutable=!1;static fromArray(e){const t=e[0].length,r=new this(e.length,t);for(let n=0;n<e.length;n++){if(e[n].length!==t)throw new Error("All rows must have the same length.");for(let o=0;o<t;o++)r.matrix[n][o]=e[n][o]}return r}static fromIterable(e){const t=[];for(const r of e)t.push([...r]);return this.fromArray(t)}static identity(e){const t=new Matrix(e,e);for(let r=0;r<e;r++)t.matrix[r][r]=1;return t}constructor(e,t){if(e<1)throw new Error("Expected rows to be greater than zero.");if(t<1)throw new Error("Expected cols to be greater than zero.");this.matrix=new Array(e);for(let r=0;r<e;r++)this.matrix[r]=new Array(t).fill(0)}get rows(){return this.matrix.length}get cols(){return this.matrix[0].length}isSameInstanceAs(e){return this===e}getImmutable(){return this.immutable}setImmutable(e){return this.immutable=e,this}deepEquals(e){const t=e instanceof Matrix?e.matrix:e;for(let e=0;e<this.rows;e++)for(let r=0;r<this.cols;r++)if(this.matrix[e][r]!==t[e][r])return!1;return!0}set(e,t,r){const n=this.immutable?this.clone():this;return n.matrix[e][t]=r,n}get(e,t){return this.matrix[e][t]}has(e,t){return e<this.rows&&t<this.cols&&e>=0&&t>=0}toArray(){const e=new Array(this.rows);for(let t=0;t<this.rows;t++)e[t]=this.matrix[t].slice();return e}clone(){const e=new Matrix(this.rows,this.cols);for(let t=0;t<this.rows;t++)for(let r=0;r<this.cols;r++)e.matrix[t][r]=this.matrix[t][r];return e}forEach(e){for(let t=0;t<this.rows;t++)for(let r=0;r<this.cols;r++)if(!1===e(this.matrix[t][r],t,r))return this;return this}forEachInRow(e,t){for(let r=0;r<this.cols;r++)if(!1===t(this.matrix[e][r],r))return this;return this}forEachInCol(e,t){for(let r=0;r<this.rows;r++)if(!1===t(this.matrix[r][e],r))return this;return this}forEachInDiagonal(e){for(let t=0;t<Math.min(this.rows,this.cols);t++)if(!1===e(this.matrix[t][t],t,t))return this;return this}map(e){const t=this.immutable?this.clone():this;for(let r=0;r<this.rows;r++)for(let n=0;n<this.cols;n++)t.matrix[r][n]=e(this.matrix[r][n],r,n);return t}*[Symbol.iterator](){for(let e=0;e<this.rows;e++)for(let t=0;t<this.cols;t++)yield this.matrix[e][t]}*values(){yield*this}mapRow(e,t){const r=this.immutable?this.clone():this;for(let n=0;n<this.cols;n++)r.matrix[e][n]=t(this.matrix[e][n],n);return r}mapCol(e,t){const r=this.immutable?this.clone():this;for(let n=0;n<this.rows;n++)r.matrix[n][e]=t(this.matrix[n][e],n);return r}appendRow(e){const t=this.immutable?this.clone():this;if(e){if(e.length!==this.cols)throw new Error("Row must have length "+this.cols)}else e=new Array(this.cols).fill(0);return t.matrix.push(e),t}appendCol(e){const t=this.immutable?this.clone():this;if(e){if(e.length!==this.rows)throw new Error("Col must have length "+this.rows)}else e=new Array(this.rows).fill(0);for(let r=0;r<this.rows;r++)t.matrix[r].push(e[r]);return t}addBy(e){return(this.immutable?this.clone():this).map((t=>t+e))}subtractBy(e){return(this.immutable?this.clone():this).map((t=>t-e))}multiplyBy(e){return(this.immutable?this.clone():this).map((t=>t*e))}divideBy(e){return(this.immutable?this.clone():this).map((t=>t/e))}addRowBy(e,t){return(this.immutable?this.clone():this).mapRow(e,(e=>e+t))}subtractRowBy(e,t){return(this.immutable?this.clone():this).mapRow(e,(e=>e-t))}multiplyRowBy(e,t){return(this.immutable?this.clone():this).mapRow(e,(e=>e*t))}divideRowBy(e,t){return(this.immutable?this.clone():this).mapRow(e,(e=>e/t))}addColBy(e,t){return(this.immutable?this.clone():this).mapCol(e,(e=>e+t))}subtractColBy(e,t){return(this.immutable?this.clone():this).mapCol(e,(e=>e-t))}multiplyColBy(e,t){return(this.immutable?this.clone():this).mapCol(e,(e=>e*t))}divideColBy(e,t){return(this.immutable?this.clone():this).mapCol(e,(e=>e/t))}swapRows(e,t){const r=this.immutable?this.clone():this,n=r.matrix[e],o=r.matrix[t];return r.matrix[e]=o,r.matrix[t]=n,r}swapCols(e,t){const r=this.immutable?this.clone():this;for(let n=0;n<this.rows;n++){const o=r.matrix[n][e],s=r.matrix[n][t];r.matrix[n][e]=s,r.matrix[n][t]=o}return r}some(e){for(let t=0;t<this.rows;t++)for(let r=0;r<this.cols;r++)if(e(this.matrix[t][r],t,r))return!0;return!1}every(e){for(let t=0;t<this.rows;t++)for(let r=0;r<this.cols;r++)if(!e(this.matrix[t][r],t,r))return!1;return!0}hasDimensions(e,t){return this.rows===e&&this.cols===t}isSquareMatrix(){return this.rows===this.cols}isScalarMatrix(){if(!this.isSquareMatrix())return!1;const e=this.matrix[0][0];for(let t=1;t<this.rows;t++)if(this.matrix[t][t]!==e)return!1;return!0}isZeroMatrix(){return this.every((e=>0===e))}dotProduct(e){if(this.cols!==e.rows)throw new Error("A*B dot product not possible unless the number of columns in A and number of rows in B are the same.");const t=this.rows,r=e.cols,n=this.cols,o=new Matrix(t,r);for(let s=0;s<t;s++)for(let t=0;t<r;t++)for(let r=0;r<n;r++)o.matrix[s][t]+=this.matrix[s][r]*e.matrix[r][t];return o}}class Queue extends Base{queue=[];static from(e){const t=new Queue;return t.queue=[...e],t}static fromJSON(e){return Queue.from(JSON.parse(e))}enqueue(e){return this.queue.push(e),this}dequeue(){const e=this.queue.shift();if(!e)throw new Error("Queue is empty");return e}get size(){return this.queue.length}toArray(){return this.queue.slice()}toJSON(){return this.queue}*[Symbol.iterator](){yield*this.queue}}function compareArray(e,t=!1){const r=t?-1:1;function recursiveCompare(t,n,o){const s=Array.isArray(t),i=Array.isArray(n);if(!s){if(i)return-1*r;{const r=e(t,n);return 0===r&&o||r}}if(!i)return 1*r;{const e=t.length,o=n.length;let s,i;e>o?(s=e,i=1*r):e<o?(s=o,i=-1*r):(s=e,i=0);for(let e=0,r=s;e<r;e++){const r=recursiveCompare(t[e],n[e],i);if(0!==r)return r}}return 0}return(e,t)=>recursiveCompare(e,t)}function compareNumber(e,t){return e-t}function compareNumeric(e,t){return e<t?-1:e>t?1:0}function compareString(e,t){return e.localeCompare(t)}const I=/((\r?\r?\n)|\s|\t){2,}/g,E=/(?<dd>[0-3][0-9])(?<mm>[0-1][0-9])(?<yy>[0-9]{2}).?(?<id>[0-9]{4})/g,C=new Map([["en-US",/^[A-Z]+$/i],["az-AZ",/^[A-VXYZÃÆÄÄ°Ä±ÃÅÃ]+$/i],["bg-BG",/^[Ð-Ð¯]+$/i],["cs-CZ",/^[A-ZÃÄÄÃÄÃÅÃÅÅ Å¤ÃÅ®ÃÅ½]+$/i],["da-DK",/^[A-ZÃÃÃ]+$/i],["de-DE",/^[A-ZÃÃÃÃ]+$/i],["el-GR",/^[Î-Ï]+$/i],["es-ES",/^[A-ZÃÃÃÃÃÃÃ]+$/i],["fa-IR",/^[Ø§Ø¨Ù¾ØªØ«Ø¬ÚØ­Ø®Ø¯Ø°Ø±Ø²ÚØ³Ø´ØµØ¶Ø·Ø¸Ø¹ØºÙÙÚ©Ú¯ÙÙÙÙÙÛ]+$/i],["fr-FR",/^[A-ZÃÃÃÃÃÃÃÃÃÃÃÅÃÃÃÅ¸]+$/i],["it-IT",/^[A-ZÃÃÃÃÃÃÃÃ]+$/i],["nb-NO",/^[A-ZÃÃÃ]+$/i],["nl-NL",/^[A-ZÃÃÃÃÃÃÃÃ]+$/i],["nn-NO",/^[A-ZÃÃÃ]+$/i],["hu-HU",/^[A-ZÃÃÃÃÃÅÃÃÅ°]+$/i],["pl-PL",/^[A-ZÄÄÄÅÅÅÃÅ»Å¹]+$/i],["pt-PT",/^[A-ZÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃ]+$/i],["ru-RU",/^[Ð-Ð¯Ð]+$/i],["sl-SI",/^[A-ZÄÄÄÅ Å½]+$/i],["sk-SK",/^[A-ZÃÄÄÃÃÅÃÅ Å¤ÃÃÅ½Ä¹ÅÄ½ÃÃ]+$/i],["sr-RS@latin",/^[A-ZÄÄÅ½Å Ä]+$/i],["sr-RS",/^[Ð-Ð¯ÐÐÐÐÐÐ]+$/i],["sv-SE",/^[A-ZÃÃÃ]+$/i],["th-TH",/^[à¸-à¹\s]+$/i],["tr-TR",/^[A-ZÃÄÄ°Ä±ÃÅÃ]+$/i],["uk-UA",/^[Ð-Ð©Ð¬Ð®Ð¯ÐIÐÒÑ]+$/i],["vi-VN",/^[A-ZÃÃáº áº¢ÃÃáº¦áº¤áº¬áº¨áºªÄáº°áº®áº¶áº²áº´ÄÃÃáº¸áººáº¼Ãá»áº¾á»á»á»ÃÃá»á»Ä¨ÃÃá»á»ÃÃá»á»á»á»á»Æ á»á»á»¢á»á» ÃÃá»¤á»¦Å¨Æ¯á»ªá»¨á»°á»¬á»®á»²Ãá»´á»¶á»¸]+$/i],["ku-IQ",/^[Ø¦Ø§Ø¨Ù¾ØªØ¬ÚØ­Ø®Ø¯Ø±ÚØ²ÚØ³Ø´Ø¹ØºÙÚ¤ÙÚ©Ú¯ÙÚµÙÙÙÛÚ¾ÛÛÛÙØ·Ø¤Ø«Ø¢Ø¥Ø£ÙØ¶ØµØ©Ø¸Ø°]+$/i],["ar",/^[Ø¡Ø¢Ø£Ø¤Ø¥Ø¦Ø§Ø¨Ø©ØªØ«Ø¬Ø­Ø®Ø¯Ø°Ø±Ø²Ø³Ø´ØµØ¶Ø·Ø¸Ø¹ØºÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙ°]+$/],["he",/^[×-×ª]+$/],["fa",/^['Ø¢Ø§Ø¡Ø£Ø¤Ø¦Ø¨Ù¾ØªØ«Ø¬ÚØ­Ø®Ø¯Ø°Ø±Ø²ÚØ³Ø´ØµØ¶Ø·Ø¸Ø¹ØºÙÙÚ©Ú¯ÙÙÙÙÙØ©Û']+$/i]]),A=new Map([["en-US",/^[0-9A-Z]+$/i],["az-AZ",/^[0-9A-VXYZÃÆÄÄ°Ä±ÃÅÃ]+$/i],["bg-BG",/^[0-9Ð-Ð¯]+$/i],["cs-CZ",/^[0-9A-ZÃÄÄÃÄÃÅÃÅÅ Å¤ÃÅ®ÃÅ½]+$/i],["da-DK",/^[0-9A-ZÃÃÃ]+$/i],["de-DE",/^[0-9A-ZÃÃÃÃ]+$/i],["el-GR",/^[0-9Î-Ï]+$/i],["es-ES",/^[0-9A-ZÃÃÃÃÃÃÃ]+$/i],["fr-FR",/^[0-9A-ZÃÃÃÃÃÃÃÃÃÃÃÅÃÃÃÅ¸]+$/i],["it-IT",/^[0-9A-ZÃÃÃÃÃÃÃÃ]+$/i],["hu-HU",/^[0-9A-ZÃÃÃÃÃÅÃÃÅ°]+$/i],["nb-NO",/^[0-9A-ZÃÃÃ]+$/i],["nl-NL",/^[0-9A-ZÃÃÃÃÃÃÃÃ]+$/i],["nn-NO",/^[0-9A-ZÃÃÃ]+$/i],["pl-PL",/^[0-9A-ZÄÄÄÅÅÅÃÅ»Å¹]+$/i],["pt-PT",/^[0-9A-ZÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃ]+$/i],["ru-RU",/^[0-9Ð-Ð¯Ð]+$/i],["sl-SI",/^[0-9A-ZÄÄÄÅ Å½]+$/i],["sk-SK",/^[0-9A-ZÃÄÄÃÃÅÃÅ Å¤ÃÃÅ½Ä¹ÅÄ½ÃÃ]+$/i],["sr-RS@latin",/^[0-9A-ZÄÄÅ½Å Ä]+$/i],["sr-RS",/^[0-9Ð-Ð¯ÐÐÐÐÐÐ]+$/i],["sv-SE",/^[0-9A-ZÃÃÃ]+$/i],["th-TH",/^[à¸-à¹\s]+$/i],["tr-TR",/^[0-9A-ZÃÄÄ°Ä±ÃÅÃ]+$/i],["uk-UA",/^[0-9Ð-Ð©Ð¬Ð®Ð¯ÐIÐÒÑ]+$/i],["ku-IQ",/^[Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©0-9Ø¦Ø§Ø¨Ù¾ØªØ¬ÚØ­Ø®Ø¯Ø±ÚØ²ÚØ³Ø´Ø¹ØºÙÚ¤ÙÚ©Ú¯ÙÚµÙÙÙÛÚ¾ÛÛÛÙØ·Ø¤Ø«Ø¢Ø¥Ø£ÙØ¶ØµØ©Ø¸Ø°]+$/i],["vi-VN",/^[0-9A-ZÃÃáº áº¢ÃÃáº¦áº¤áº¬áº¨áºªÄáº°áº®áº¶áº²áº´ÄÃÃáº¸áººáº¼Ãá»áº¾á»á»á»ÃÃá»á»Ä¨ÃÃá»á»ÃÃá»á»á»á»á»Æ á»á»á»¢á»á» ÃÃá»¤á»¦Å¨Æ¯á»ªá»¨á»°á»¬á»®á»²Ãá»´á»¶á»¸]+$/i],["ar",/^[Ù Ù¡Ù¢Ù£Ù¤Ù¥Ù¦Ù§Ù¨Ù©0-9Ø¡Ø¢Ø£Ø¤Ø¥Ø¦Ø§Ø¨Ø©ØªØ«Ø¬Ø­Ø®Ø¯Ø°Ø±Ø²Ø³Ø´ØµØ¶Ø·Ø¸Ø¹ØºÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙÙ°]+$/],["he",/^[0-9×-×ª]+$/],["fa",/^['0-9Ø¢Ø§Ø¡Ø£Ø¤Ø¦Ø¨Ù¾ØªØ«Ø¬ÚØ­Ø®Ø¯Ø°Ø±Ø²ÚØ³Ø´ØµØ¶Ø·Ø¸Ø¹ØºÙÙÚ©Ú¯ÙÙÙÙÙØ©ÛÛ±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹Û°']+$/i]]);var O=Object.freeze({__proto__:null,repeatingWhiteSpace:I,words:/\b[^\W]+/g,socialSecurityNumbersDK:E,integers:/-?\d+/g,numberNoThousandSepCommaDecimal:/-?\d+,\d+/g,numberNoThousandSepDotDecimal:/-?\d+.\d+/g,numberDotSepCommaDecimal:/-?\d{1,3}(\.\d{3})*(,\d+)?/g,numberCommaSepDotDecimal:/-?\d{1,3}(,\d{3})*(\.\d+)?/g,isHexPrefix:/^(0x|0h|(\\?u)|#)/i,isHex:/^(0x|0h|(\\?u)|#)?[0-9A-F]+$/i,isLocaleAlpha:C,isLocaleAlphaNumeric:A});function*rexec(e,t){let r;for(;null!==(r=e.exec(t));)yield{index:r.index,lastIndex:e.lastIndex,groups:Object.assign({},r.groups),match:r[0]}}function regexGetGroupNames(e){const t=[];for(const r of rexec(/\(\?<(?<name>\w+)>/g,e.toString()))t.push(r.groups.name);return t}function regexEscapeString(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function regexMatcherToValidater(e){return new RegExp(`^${e.source}$`,e.flags.replace("g",""))}function strCountCharOccurances(e,t){if(1!==t.length)throw new Error("Expected char to be a single character string of length 1.");let r=0;for(const n of e)n===t&&r++;return r}function strIsLowerCase(e){return e===e.toLowerCase()}function strIsUpperCase(e){return e===e.toUpperCase()}function strLinesRemoveEmpty(e){return e.replace(/\r?\n\s*\r?\n/gm,"\n").trimStart().trimEnd()}function strLinesTrimRight(e){return e.replace(/\s+\n/gm,"\n")}function strRemoveDuplicateChars(e){return Array.from(new Set(e)).join("")}function strRepeat(e,t){return new Array(t).fill(e).join("")}function strSortChars(e){return Array.from(e).sort().join("")}function isCamelCaseWordBreakIndex(e,t){return strIsLowerCase(e[t-1])&&strIsUpperCase(e[t])&&!isNumericString(e[t-1])&&!isNumericString(e[t])}const $={toBuffer:(e,t="sha256")=>o.createHash(t).update(e).digest(),toUint32Array(e,t="sha256"){return new Uint32Array(this.toBuffer(e,t).buffer)},toString(e,t="sha256",r="base64"){return this.toBuffer(e,t).toString(r)},listAlgorithms:()=>o.getHashes()};function regexIsValidFlags(e){return/^[gimsuy]*$/.test(e)&&strRemoveDuplicateChars(e).length===e.length}function regexFixFlags(e){return e?strSortChars(strRemoveDuplicateChars(e).replace(/[^gimsuy]/gi,"")):e}function regexValidFlags(){return["g","i","m","s","u","y"]}class BemojeRegex extends RegExp{static defaultOptions={escapeSourceString:!1,fixFlags:!1};options;constructor(e,t="",r){e instanceof RegExp&&!t?super(e):(r=Object.assign({},BemojeRegex.defaultOptions,r),e instanceof RegExp?(t=t||e.flags,e=e.source):r?.escapeSourceString&&(e=regexEscapeString(e)),super(e,t=r.fixFlags?regexFixFlags(t):strSortChars(t))),this.options=r||BemojeRegex.defaultOptions}static isValidFlags=regexIsValidFlags;static fixFlags=regexFixFlags;static getValidFlags=regexValidFlags;compareTo(e){return this.source===e.source&&this.flags===e.flags}compareToStrict(e){return e instanceof BemojeRegex&&this.source===e.source&&this.flags===e.flags}getGroupNames(){return regexGetGroupNames(this)}*rexec(e){yield*rexec(this,e)}toValidator(){return Object.setPrototypeOf(regexMatcherToValidater(this),BemojeRegex.prototype)}toRegExp(){return Object.setPrototypeOf(this,RegExp.prototype)}}function funSetName(e,t){return Object.defineProperty(t,"name",{value:e,configurable:!0}),t}function parseParam(e){const t="string"==typeof e?new RegExp(regexEscapeString(e),"g"):new RegExp(e.source,strRemoveDuplicateChars(e.flags+"g"));return[t,new RegExp("^"+t.source+"$","")]}const v=/^[A-Z]*$/i,D=new Map;function letterToCol(e,t=!1){e=e.toUpperCase();const r=D.get(e);if(r)return r;if(!v.test(e))throw new Error(`Invalid column letter: ${e}`);let n=0;const o=e.length;for(let t=0;t<o;t++)n+=(e.charCodeAt(t)-64)*Math.pow(26,o-t-1);return n-(t?1:0)}const R=/^(?<a>[A-Z]+)(?<n>[1-9]+)$/g;function A1ToColRow(e,t=!1){e=e.toUpperCase();const r=[...rexec(R,e)];if(!r.length)throw new Error(`Invalid A1 string: ${e}`);const n=t?1:0;return[letterToCol(r[0].groups.a)-n,parseInt(r[0].groups.n)-n]}const M=new Map;function colToLetter(e,t=!1){t&&e++;const r=M.get(e);if(r)return r;if(!Number.isInteger(e))throw new Error(`Expected col to be an integer. Got: ${e}`);if(e<1)throw new Error(`Expected col to be greater than zero. Got: ${e}`);let n,o="";for(;e>0;)n=(e-1)%26,o=String.fromCharCode(n+65)+o,e=(e-n-1)/26;return o}class Table extends Base{_columnHeaders;_rowHeaders;_data=[];static fromCSV(e,t=";",r={}){return r.data=e.split("\n").filter((e=>e.length)).map((e=>e.trim().split(t))),new Table(r)}static fromJSON(e){return new Table(JSON.parse(e))}constructor(e={}){super(),this.validateOptions(e),this.handleOptions(e),this.validateData(),this.setNonEnumerablePrivateProperties()}get columns(){return this._data[0].length}get rows(){return this._data.length}get columnHeaders(){if(!this._columnHeaders)throw new Error("No column headers are defined for this table.");return this._columnHeaders?this._columnHeaders.slice():[]}get rowHeaders(){if(!this._rowHeaders)throw new Error("No row headers are defined for this table.");return this._rowHeaders?this._rowHeaders.slice():[]}get(e,t,r=!1){return[e,t]=this.normalizeColRow(e,t,r),this._data[t][e]}set(e,t,r,n=!1){return[e,t]=this.normalizeColRow(e,t,n),this._data[t][e]=r,this}removeColumn(e,t=!1){return e=this.normalizeCol(e,t),arrMapMutable(this._data,(t=>(t.splice(e,1),t))),this._columnHeaders&&this._columnHeaders.splice(e+(this._rowHeaders?1:0),1),this}removeRow(e,t=!1){return e=this.normalizeRow(e,t),this._data.splice(e,1),this._rowHeaders&&this._rowHeaders.splice(e,1),this}indexOfColumnHeader(e){if(!this._columnHeaders)throw new Error("No column headers are defined for this table.");return this._columnHeaders.indexOf(e)-(this._rowHeaders?1:0)}indexOfRowHeader(e){if(!this._rowHeaders)throw new Error("No row headers are defined for this table.");return this._rowHeaders.indexOf(e)}toArray(){const e=[];this._columnHeaders&&e.push(this.columnHeaders);for(let t=0;t<this.rows;t++){const r=this._data[t].slice();this._rowHeaders&&r.unshift(this._rowHeaders[t]),e.push(r)}return e}toArrayDataOnly(){const e=[];for(let t=0;t<this.rows;t++)e.push(this._data[t].slice());return e}toCSV(e=";"){return arr2dToCSV(this.toArray(),e)}toJSON(){return{columnHeaders:this._columnHeaders||[],rowHeaders:this._rowHeaders||[],data:this._data}}validateOptions(e){this.assertNoAmbiguousOptions(e,[["extractColumnHeaders","columnHeaders"],["extractRowHeaders","rowHeaders"],["columns","data"],["rows","data"],["columns","columnHeaders"],["rows","rowHeaders"]]),this.assertNoOptionsRequireMissingOptions(e,[["extractColumnHeaders","data"],["extractRowHeaders","data"]])}handleOptions(e){if((e=Object.assign({},e)).extractColumnHeaders&&e.data&&(e.data=e.data.slice(),e.columnHeaders=e.data.splice(0,1)[0].map((e=>e+""))),e.extractRowHeaders&&e.data){e.data=e.data.map((e=>e.slice())),e.rowHeaders=[];for(let t=0;t<e.data.length;t++)e.rowHeaders.push(e.data[t].splice(0,1)[0]+"")}if(e.rowHeaders?(this._rowHeaders=e.rowHeaders.slice(),e.rows=e.rowHeaders.length):void 0===e.rows?e.rows=1:this.validateRowMin(e.rows),e.columnHeaders?(this._columnHeaders=e.columnHeaders.slice(),e.columns=e.columnHeaders.length-(e.rowHeaders?1:0)):void 0===e.columns?e.columns=1:this.validateColMin(e.columns),e.data)for(let t=0;t<e.data.length;t++)this._data.push(e.data[t].slice());else this.buildEmptyTableWithDimensions(e.rows,e.columns)}validateData(){if(this._columnHeaders){const e=this._columnHeaders.length-(this._rowHeaders?1:0);if(!arrEvery(this._data.map((e=>e.length)),(t=>t===e)))throw new Error("Expected all rows to be of same length.")}if(this._rowHeaders&&this._rowHeaders.length!==this._data.length)throw new Error("Expected a row header for each row.")}buildEmptyTableWithDimensions(e,t){for(let r=0;r<e;r++)this._data.push(new Array(t))}validateRowMin(e){if(e<1)throw new Error("Expected rows to be integer larger than 0 but got: "+e);if(!Number.isInteger(e))throw new Error("Expected rows to be integer an integer.")}validateColMin(e){if(e<1)throw new Error("Expected columns to be integer larger than 0 but got: "+e);if(!Number.isInteger(e))throw new Error("Expected columns to be integer an integer.")}ensureValidRowIndex(e){if("string"==typeof e){if(!this._rowHeaders)throw new Error("Cannot pass row as string when no rowHeaders are defined.");if(-1===(e=this._rowHeaders.indexOf(e)))throw new Error("Row not found in rowHeaders.")}else this.validateRowMin(e+1);return e}ensureValidColIndex(e){if("string"==typeof e){if(!this._columnHeaders)throw new Error("Cannot pass col as string when no columnHeaders are defined.");if((e=this._columnHeaders.indexOf(e)-(this._rowHeaders?1:0))<0)throw new Error("Col not found in columnHeaders.")}else this.validateColMin(e+1);return e}normalizeCol(e,t){return t&&(e=letterToCol(String(e),!0)),this.ensureValidColIndex(e)}normalizeRow(e,t){return t&&(e=Number(e)),this.ensureValidRowIndex(e)}normalizeColRow(e,t,r){return r&&([e,t]=A1ToColRow(String(e)+String(t),!0)),[this.ensureValidColIndex(e),this.ensureValidRowIndex(t)]}}function isValidDate(e,t,r,n,o,s,i){let a="",u="";return void 0!==e&&(u+="YYYY",a+=`${e.toString().padStart(4,"0")}`),void 0!==t&&(u+="-MM",a+=`-${t.toString().padStart(2,"0")}`),void 0!==r&&(u+="-DD",a+=`-${r.toString().padStart(2,"0")}`),void 0!==n&&(u+=" HH",a+=` ${n.toString().padStart(2,"0")}`),void 0!==o&&(u+=":mm",a+=`:${o.toString().padStart(2,"0")}`),void 0!==s&&(u+=":ss",a+=`:${s.toString().padStart(2,"0")}`),void 0!==i&&(u+=":SSS",a+=`:${i.toString().padStart(3,"0")}`),m.default.isValid(a,u)}function isValidDateMonth(e){return Number.isInteger(e)&&e>=1&&e<=12}function assertValidDateMonth(e){if(!isValidDateMonth(e))throw new Error(`Invalid month: ${e}.`)}const N=[0,31,28,31,30,31,30,31,31,30,31,30,31];function numDaysInMonth(e,t){return assertValidDateMonth(e),2===e&&void 0!==t&&isLeapYear(t)?29:N[e]}function isValidDateDay(e,t,r){return!!Number.isInteger(e)&&(!(e<1)&&!(e>numDaysInMonth(t,r)))}function isValidDateYear(e){return Number.isInteger(e)&&e>=0}function assertValidDateYear(e){if(!isValidDateYear(e))throw new Error(`Invalid year: ${e}.`)}function getCentury(e){return assertValidDateYear(e),Math.floor(e/100)+1}function getCurrentYear(){return(new Date).getUTCFullYear()}function isLeapYear(e){return assertValidDateYear(e),0==e%4&&0!=e%100||0==e%400}const T=[],F=[];let H=-1;function Indexed(e){const t=++H;T[t]=[];let r=-1;const n=class Indexed extends e{static instances=T[t];static clsId=t;id;constructor(...e){super(...e),this.id=[t,++r],this.klass.instances[this.insId]=this}get clsId(){return this.id[0]}get insId(){return this.id[1]}get uidString(){return this.clsId.toString(16)+"-"+this.insId.toString(16)}get guidHashMd5(){return $.toString(this.uidString,"md5","base64url")}get guidHashSha256(){return $.toString(this.uidString,"sha256","base64url")}get klass(){return this.constructor.prototype.constructor}};return F[t]=n,n}function IndexedGetClass(e){return F[e]}function IndexedGetInstance(e,t){return T[e][t]}function Timestamped(e){const t=Date.now();return class Timestamped extends e{static timestamp=t;timestamp=Date.now()}}function Options(e){const t=new WeakMap;return class Options extends e{constructor(...e){let r=e.shift();super(...e),r=Object.assign({},this.defaultOptions,r),t.set(this,r),this.handleOptions(r)}handleOptions(e){Object.assign(this,e)}get options(){return t.get(this)||{}}get defaultOptions(){return this.klass.defaultOptions}get klass(){return this.constructor.prototype.constructor}}}function Revivable(e){const t=[];return class Revivable extends e{static ignoreKeyWhenSerializing(e){t.push(e)}static fromJSON(e){return Object.setPrototypeOf(JSON.parse(e),this.prototype)}constructor(...e){super(...e),setNonEnumerable(this,...t)}toJSON(){return this}stringify(e=0){return JSON.stringify(this,null,e)}}}class User extends(Revivable(Options(Timestamped(Indexed(Base))))){static defaultOptions={wow:"cool",dam:2};constructor(e){super(e),this.init()}}const P={Base:Base,Indexed:Indexed,IndexedGetClass:IndexedGetClass,IndexedGetInstance:IndexedGetInstance,Timestamped:Timestamped,Options:Options},B=new a.OpenAIApi(new a.Configuration({apiKey:process.env.OPENAI_API_KEY}));const j=function gptHttpRequester(e=0,t){return async function(r){const n=(await B.createChatCompletion({model:"gpt-3.5-turbo",temperature:e,messages:[{role:"system",content:t},{role:"user",content:r}]})).data,o=n?.choices[0]?.message?.content?.toString()||"";return{data:n,text:o}}}(0,["You are a helpful assistant who will help write tests for TypeScript code.","The tests need to be written using the Jest testing framwork.",'Use the Jest framework methods called "describe" and "it".',"Your reply should only be the code. No comments or other text."].join("\n"));function singlePass(e,t,r){if(void 0===t||void 0===r){let n=0,o=0;for(const t of e){const e=t.length;n+=e,e>o&&(o=e)}n=Math.floor(n/e.length),void 0===t&&(t=n-Math.floor(n/2)),void 0===r&&(r=o-Math.floor(n/2))}for(let n=1;n<e.length;n++){const o=e[n],s=e[n-1];o.length+s.length<r&&(o.length<t||s.length<t)&&(e[n]=`${s} ${o}`,e[n-1]="")}return e.filter((e=>!!e))}function normalizeFileExtension(e){if(""===e||"."===e)return"";if(/[<>"|?*:]/g.test(e))throw new Error(`Illegal characters in file extension: ${e}  |  Illegal characters are: <>"|?:*`);return 0===strCountCharOccurances(e,".")?"."+e:e.substring(e.lastIndexOf("."))}function isEven(e){if(!Number.isInteger(e))throw new Error(`Expected integer. Got ${e}`);return e%2==0}const V=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];const _=new Map;function numFormatEU(e,t=0){let r=_.get(t);return r||(r=w.default({truncate:t,padRight:t,integerSeparator:".",decimal:","}),_.set(t,r)),r(e)}const U=new Map;function numFormatUS(e,t=0){let r=U.get(t);return r||(r=w.default({truncate:t,padRight:t,integerSeparator:",",decimal:"."}),U.set(t,r)),r(e)}const formatMemoryUsageOutput=e=>{const t=process.memoryUsage();return{processAllocationMB:e(t.rss),heapAllocationMB:e(t.heapTotal),heapUsedMB:e(t.heapUsed),extenalV8:e(t.external)}};class StringStream extends h.Readable{str;ended;constructor(e){super(),this.str=e,this.ended=!1}_read(){this.ended||(process.nextTick((()=>{this.push(Buffer.from(this.str)),this.push(null)})),this.ended=!0)}}const L=y.default.createLogger({format:y.default.format.combine(y.default.format.timestamp(),y.default.format.json()),transports:[new y.default.transports.File({filename:"logs/app.log"})]}),G={info:e=>{L.info(e),"object"==typeof e?console.log(e):console.log(b.default.magenta((new Date).toISOString())+" ["+b.default.green("INFO")+"]: "+b.default.cyan(e))},warn:e=>{L.warn(e),"object"==typeof e?console.log(e):console.log(b.default.magenta((new Date).toISOString())+" ["+b.default.yellow("WARN")+"]: "+b.default.yellow(e))},error:e=>{L.error(e),"object"==typeof e?console.error(e):console.error(b.default.magenta((new Date).toISOString())+" ["+b.default.red("ERROR")+"]: "+b.default.red(e))}};function parseSocialSecurityNumberDK(e){const t=e.match(regexMatcherToValidater(E));if(!t||!t.groups)throw new Error(`Invalid Danish social security number format. Expected ddmmyy[-]xxxx. Got: ${e}`);const{dd:r,mm:n,yy:o,id:s}=t.groups,i=parseInt(r),a=parseInt(n),u=getCurrentYear(),l=parseInt(o)>parseInt(String(u).substring(2))?parseInt(`${getCentury(u)-2}${o}`):parseInt(`${getCentury(u)-1}${o}`);if(!isValidDate(l,a,i))throw new Error("Expected valid birth date.");return{year:l,month:a,day:i,id:parseInt(s),sex:isEven(parseInt(s.substring(3)))?"F":"M"}}function arrFlatten(e,t=Number.MAX_SAFE_INTEGER){const r=[];return function recurse(n=e,o=0){for(let e=0;e<n.length;e++)Array.isArray(n[e])&&o<t?recurse(n[e],o+1):r.push(n[e])}(),r}function arrMapMutable(e,t){for(let r=0;r<e.length;r++)e[r]=t(e[r],r,e);return e}function arrShallowEquals(e,t){return e.length===t.length&&arrEvery(e,((e,r)=>e===t[r]))}function arrSwap(e,t,r){return[e[t],e[r]]=[e[r],e[t]],e}function arrSum(e){return e.reduce(((e,t)=>e+t),0)}e.A1ToColRow=A1ToColRow,e.Base=Base,e.BemojeRegex=BemojeRegex,e.ExtensibleFunction=class ExtensibleFunction extends Function{constructor(e,t){return Object.defineProperty(t,"name",{value:e}),super(t),Object.setPrototypeOf(t,new.target.prototype)}},e.Indexed=Indexed,e.IndexedGetClass=IndexedGetClass,e.IndexedGetInstance=IndexedGetInstance,e.Matrix=Matrix,e.Mixins=P,e.Options=Options,e.Queue=Queue,e.Revivable=Revivable,e.SortedArray=class SortedArray extends Array{compare=compareString;compareFound=!1;allowDuplicates=!0;constructor(e={}){if(super(),Object.defineProperty(this,"compare",{enumerable:!1}),Object.defineProperty(this,"compareFound",{enumerable:!1}),Object.defineProperty(this,"allowDuplicates",{enumerable:!1}),e.compare&&(this.compare=e.compare,this.compareFound=!0),e.data){for(const t of e.data)this.push(t);!this.compareFound&&this.length&&"string"!=typeof this[0]&&(this.compare=compareNumeric,this.compareFound=!0),t.sort(this,this.compare)}!1===e.allowDuplicates&&(this.allowDuplicates=!1,this.unique())}toArray(){return Array.from(this)}add(e){if(this.compareFound||"string"!=typeof e&&(this.compare=compareNumeric,this.compareFound=!0),0===this.length)return this.push(e),this;const[t,r]=this.insertionIndex(e);return r&&!this.allowDuplicates||this.splice(t,0,e),this}addMany(...e){if(0===e.length)return this;for(const t of e)this.add(t);return this}unique(){let e=this.length;if(e<=1)return this;for(let t,r,n=1;n<e;n++)t=this[n-1],r=this[n],0===this.compare(t,r)&&(this.splice(n,1),e--,n--);return this}insertionIndex(e){if(0===this.length)return[0,!1];let t=0,r=this.length;for(;t<r;){const n=t+r>>>1,o=this.compare(this[n],e);if(0===o)return[n,!0];o<0?t=n+1:r=n}return[t,!1]}firstInsertionIndex(e){const[t,r]=this.insertionIndex(e);if(!r)return[t,r];let n=t-1;for(;n>=0;){if(0!==this.compare(this[n],e))return[n+1,r];n--}return[0,r]}lastInsertionIndex(e){const[t,r]=this.insertionIndex(e);if(!r)return[t,r];let n=t+1;for(;n<this.length;){if(0!==this.compare(this[n],e))return[n,r];n++}return[this.length,r]}indexOfCompare(e){if(0===this.length)return-1;if(1===this.length)return 0===this.compare(this[0],e)?0:-1;const[t,r]=this.insertionIndex(e);return r?t:-1}firstIndexOfCompare(e){if(0===this.length)return-1;if(1===this.length)return 0===this.compare(this[0],e)?0:-1;const[t,r]=this.firstInsertionIndex(e);return r?t:-1}lastIndexOfCompare(e){if(0===this.length)return-1;if(1===this.length)return 0===this.compare(this[0],e)?0:-1;const[t,r]=this.lastInsertionIndex(e);return r?t-1:-1}indicesOfCompare(e){const t=this.indexOfCompare(e);if(-1===t)return[];const r=[];if(!this.allowDuplicates)return r;let n=t-1;for(;n>=0&&0===this.compare(this[n],e);)r.push(n),n--;for(r.push(t),n=t+1;n<this.length&&0===this.compare(this[n],e);)r.push(n),n++;return r.sort(compareNumber),r}intersection(e){const t=[];let r=0,n=0;for(;r<this.length&&n<e.length;)this.compare(this[r],e[n])<0?r++:0===this.compare(this[r],e[n])?(t.push(this[r]),r++,n++):n++;return t}},e.StringStream=StringStream,e.Table=Table,e.Timer=class Timer{t0;constructor(){this.t0=Date.now()}stop(){return Date.now()-this.t0}},e.Timestamped=Timestamped,e.absolutCwdPathToRelative=function absolutCwdPathToRelative(e){return e.replace(process.cwd(),"").replace(/\\/g,"/").replace(/^\//,"")},e.arr2dToCSV=arr2dToCSV,e.arrAssignFrom=arrAssignFrom,e.arrAverage=function arrAverage(e){return arrSum(e)/e.length},e.arrEvery=arrEvery,e.arrFilterMutable=function arrFilterMutable(e,t){return arrAssignFrom(e,e.filter(t))},e.arrFlatten=arrFlatten,e.arrFlattenMutable=function arrFlattenMutable(e,t=Number.MAX_SAFE_INTEGER){return arrAssignFrom(e,arrFlatten(e,t))},e.arrIndicesOf=function arrIndicesOf(e,t){const r=[];for(let n=0;n<e.length;n++)t===e[n]&&r.push(n);return r},e.arrMapMutable=arrMapMutable,e.arrShallowEquals=arrShallowEquals,e.arrShuffle=function arrShuffle(e){const t=e.slice();let r=!0;for(;r;){for(let t=0,r=e.length;t<r;t++){arrSwap(e,t,Math.floor(Math.random()*r))}r=arrShallowEquals(e,t)}return e},e.arrSome=function arrSome(e,t){for(let r=0,n=e.length;r<n;r++)if(!0===t(e[r],r,e))return!0;return!1},e.arrSortNumeric=function arrSortNumeric(e){return e.sort(compareNumeric)},e.arrSum=arrSum,e.arrSwap=arrSwap,e.assertValidDate=function assertValidDate(e,t,r,n,o,s,i){if(!isValidDate(e,t,r,n,o,s,i))throw new Error(`Expected valid date. Got: ${JSON.stringify({year:e,month:t,day:r,hour:n,minute:o,second:s,millisecond:i})}.`)},e.assertValidDateDay=function assertValidDateDay(e,t,r){if(!isValidDateDay(e,t,r))throw new Error(`Invalid day of the month: ${e}.`)},e.assertValidDateMonth=assertValidDateMonth,e.assertValidDateYear=assertValidDateYear,e.asyncParallel=async function asyncParallel(e){return await Promise.all(e.map((e=>e())))},e.asyncSerial=async function asyncSerial(e){const t=[];for(const r of e)t.push(await r());return t},e.asyncWithTimeout=function asyncWithTimeout(e,t,...r){return new Promise(((n,o)=>{setTimeout((()=>{o(new Error(`Timed out after ${e} ms.`))}),e),t(...r).then((e=>{n(e)}),(e=>{o(e)})).catch((e=>{o(e)}))}))},e.atob=function atob(e){return Buffer.from(e,"base64")},e.btoa=function btoa(e){return e.toString("base64")},e.buildRegexBetween=function buildRegexBetween(e,t,r){return e="string"==typeof e?regexEscapeString(e):e.source,t="string"==typeof t?regexEscapeString(t):t.source,r=r?strRemoveDuplicateChars("gs"+r):"gs",new RegExp(`(?<left>${e})(?<mid>.*?)(?=${t})(?<right>${t})`,r)},e.bytesToInt=function bytesToInt(e){return 1===e.length&&e[0]<251?e[0]:2===e.length&&251===e[0]?251+e[1]:3===e.length&&252===e[0]?251+256*e[1]+e[2]:4===e.length&&253===e[0]?251+65536*e[1]+256*e[2]+e[3]:5===e.length&&254===e[0]?251+16777216*e[1]+65536*e[2]+256*e[3]+e[4]:e.length>5&&255===e[0]?(()=>{let t=0,r=1;const n=Math.max(2,e.length-6);for(let o=e.length-1;o>=n;o--)t+=r*e[o],r*=256;const o=e[1]+32<251?bytesToInt([e[1]+32])-11:255===e[0]&&e[1]<251?e[1]+21:3===n?bytesToInt([e[1],e[2]+21]):4===n?bytesToInt([e[1],e[2],e[3]+21]):0,s=251+t/Math.pow(2,32-o);if(!Number.isInteger(s))throw new Error(`Invalid bytes. Got [${e.join(", ")}] = ${s}`);if(s>1099511627776)throw new Error(`Bytes must correspond to an integer less than or equal to 256^5. Got [${e.join(", ")}] = ${s}`);return s})():(()=>{throw new Error(`Invalid first byte. Got length: ${e.length}, and bytes: [${e.join(", ")}]`)})()},e.colRowToA1=function colRowToA1(e,t=!1){if(2!==e.length)throw new Error(`Expected CR to to be length 2. Got: ${e.length}`);if(!Number.isInteger(e[1]))throw new Error(`Expected row to be an integer. Got: ${e[1]}`);if(e[1]<1)throw new Error(`Expected row to be greater than zero. Got: ${e[1]}`);return colToLetter(e[0],t)+e[1].toString()},e.colToLetter=colToLetter,e.compareArray=compareArray,e.compareNumber=compareNumber,e.compareNumberDescending=function compareNumberDescending(e,t){return t-e},e.compareNumeric=compareNumeric,e.compareNumericDescending=function compareNumericDescending(e,t){return e>t?-1:e<t?1:0},e.compareString=compareString,e.compareStringDescending=function compareStringDescending(e,t){return t.localeCompare(e)},e.createFileExtensionFilter=function createFileExtensionFilter(...e){return e.length?t=>{for(const r of e.map(normalizeFileExtension))if(g.default.extname(t)===r)return!0;return!1}:()=>!0},e.ensureValidWindowsPath=function ensureValidWindowsPath(e,t){const throwOrFalse=r=>{if(t&&!0===t.assert)throw new Error(`Invalid windows path. ${r}  |  input received: ${e}`);return!1};if(0===e.length)return throwOrFalse("Path string is length 0.");if(strCountCharOccurances(e,"/")>0&&strCountCharOccurances(e,"\\")>0)return throwOrFalse("Path contains both backslash and forward slash.");const r=(t&&t.extendedMaxLength?32767:260)-12;if(e.length>r)return throwOrFalse(`Maximum length of ${r} exceeded`);let n=e;return/^\w:(\\|\/)/g.test(e)&&(n=e.substring(2)),/[<>"|?*:]/g.test(n)?throwOrFalse(`Illegal characters in: ${e}  |  Illegal characters are: <>"|?:*`):!/(\\|\/)(CON|PRN|AUX|NUL|COM[1-9]|LPT[1-9])((\\|\/)|$)/g.test(e)||throwOrFalse("Illegal name in path string")},e.funSetName=funSetName,e.generateUnitTests=async function generateUnitTests(e,t,r,n=!0){const o=g.default.join(process.cwd(),"tests",t+".test.ts"),s=p.default.existsSync(o);if(!n&&s)return console.log("test already exists: "+o);n&&!s&&(n=!1);let i="";if(n&&(i=p.default.readFileSync(o).toString(),i.includes(r)))return console.log("tests already exists in the file: "+o);const a=await j(e.replace(/import .+\n/gm,"").trim()),u=a.data,l=(n?"":`import * as util from '../src/libs/${t}'\n\n`)+a.text.trim().replace(/^```(\w+)?/,"").replace(/```$/,"").replace(/import .+\n/gm,"").split(r).join("util."+r).replace("describe('util.","describe('").replace('describe("util.','describe("').trim();return await p.default.promises.writeFile(o,n?i+"\n\n"+l:l),{data:u,text:l}},e.getCentury=getCentury,e.getConstructor=function getConstructor(e){return Object.getPrototypeOf(e).constructor},e.getCurrentYear=getCurrentYear,e.getPrototype=function getPrototype(e){return Object.getPrototypeOf(e)},e.htmlTableTo2dArray=function htmlTableTo2dArray(e,t=!0){const r=[],n=e.querySelectorAll("tr");for(let e=0;e<n.length;e++){const o=n[e],s=[],i=o.querySelectorAll(t?"th,td":"td");for(let e=0;e<i.length;e++){const t=i[e];t&&s.push(t?.textContent?.trim()||"")}!t&&o.querySelectorAll("th").length||s.length&&r.push(s)}return r},e.inheritStaticMembers=inheritStaticMembers,e.intToArrayBytes=intToArrayBytes,e.intToBuffer=function intToBuffer(e){return Buffer.from(intToArrayBytes(e))},e.intToBytes=function intToBytes(e){if(!Number.isInteger(e)||e<0)throw new Error(`input must be a positive integer. Got ${e}`);if(e>1099511627776)throw new Error(`input must be less than or equal to 256^5. Got ${e}`);const t=e-251;return e<251?[e]:t<256?[251,t]:t<65536?[252,Math.floor(t/256),t%256]:t<16777216?[253,Math.floor(t/65536),Math.floor(t/256)%256,t%256]:t<4294967296?[254,Math.floor(t/16777216),Math.floor(t/65536)%256,Math.floor(t/256)%256,t%256]:(()=>{const e=Math.floor(Math.log(t)/Math.log(2))-32,r=[255,...intToBytes(e)],n=Math.floor(t/Math.pow(2,e-11));for(let e=5,t=1099511627776;e>=0;e--,t/=256)r.push(Math.floor(n/t)%256);return r})()},e.interfaceDefinitions=x,e.isConstructor=isConstructor,e.isEven=isEven,e.isHex=function isHex$1(e){return/[\da-f]+$/i.test(e)},e.isHexOrUnicode=function isHexOrUnicode(e){return/^(\\\\?u|0x)?[\da-f]+$/i.test(e)},e.isIterable=function isIterable(e){return"undefined"!=typeof Symbol&&Symbol&&"iterator"in Symbol&&null!=e&&"function"==typeof e[Symbol.iterator]},e.isLeapYear=isLeapYear,e.isNumericString=isNumericString,e.isObject=isObject,e.isOdd=function isOdd(e){if(!Number.isInteger(e))throw new Error(`Expected integer. Got ${e}`);return e%2!=0},e.isPrototype=isPrototype,e.isSocialSecurityNumberDK=function isSocialSecurityNumberDK(e){try{return parseSocialSecurityNumberDK(e),!0}catch(e){return!1}},e.isValidDate=isValidDate,e.isValidDateDay=isValidDateDay,e.isValidDateMonth=isValidDateMonth,e.isValidDateYear=isValidDateYear,e.isoDateTimestamp=function isoDateTimestamp(e=new Date){return e.toISOString().replace(/\D/g,"")},e.iteratePrototypeChain=iteratePrototypeChain,e.letterToCol=letterToCol,e.log=G,e.mapGetOrDefault=function mapGetOrDefault(e,t,r){const n=e.get(t);return void 0!==n?n:(e.set(t,r),r)},e.mapGetOrElse=function mapGetOrElse(e,t,r){let n=e.get(t);return void 0!==n||(n=r(t),e.set(t,n)),n},e.mapUpdate=function mapUpdate(e,t,r){const n=e.get(t);return void 0===n||e.set(t,r(n)),e},e.mapUpdateDefault=function mapUpdateDefault(e,t,r,n){const o=e.get(t);return e.set(t,n(void 0===o?r:o)),e},e.memoryUsage=function memoryUsage(){const toIntMB=e=>Math.floor(1e-6*e),e=process.memoryUsage();return{processAllocationMB:toIntMB(e.rss),heapAllocationMB:toIntMB(e.heapTotal),heapUsedMB:toIntMB(e.heapUsed),extenalV8:toIntMB(e.external)}},e.memoryUsageEuFormat=function memoryUsageEuFormat(){return formatMemoryUsageOutput((e=>`${numFormatEU(1e-6*e,2)} MB`))},e.memoryUsageUsFormat=function memoryUsageUsFormat(){return formatMemoryUsageOutput((e=>`${numFormatUS(1e-6*e,2)} MB`))},e.normalizeFileExtension=normalizeFileExtension,e.normalizeLineLengths=function normalizeLineLengths(e,t,r){let n=singlePass(e,t,r);for(;n.length!==e.length;)n=singlePass(e=n,t,r);return n},e.numApproximateLog10=function numApproximateLog10(e){if(!Number.isInteger(e)||e<0||e>=1e10)throw new Error(`Expected positive integer smaller than 10^10. Got ${e}`);return e<V[5]?e<V[2]?e<V[1]?0:1:e<V[4]?e<V[3]?2:3:4:e<V[7]?e<V[6]?5:6:e<V[9]?e<V[8]?7:8:9},e.numDaysInMonth=numDaysInMonth,e.numFormatEU=numFormatEU,e.numFormatUS=numFormatUS,e.padArrayBytesLeft=function padArrayBytesLeft(e){const t=e.length;return 4===t?e:1===t?[0,0,0,e[0]]:2===t?[0,0,e[0],e[1]]:[0,e[0],e[1],e[2]]},e.padArrayBytesRight=function padArrayBytesRight(e){const t=e.length;return 4===t?e:1===t?[e[0],0,0,0]:2===t?[e[0],e[1],0,0]:[e[0],e[1],e[2],0]},e.parseSocialSecurityNumberDK=parseSocialSecurityNumberDK,e.pathFromCwd=function pathFromCwd(...e){return g.default.join(process.cwd(),...e)},e.randomIntBetween=function randomIntBetween(e,t){if(!Number.isInteger(e))throw new Error(`min must be an integer. Got ${e}`);if(!Number.isInteger(t))throw new Error(`max must be an integer. Got ${t}`);return Math.floor(Math.random()*(t-e+1)+e)},e.readFileStringSync=function readFileStringSync(e){return p.default.readFileSync(e,"utf8").toString()},e.regexEscapeString=regexEscapeString,e.regexFixFlags=regexFixFlags,e.regexGetGroupNames=regexGetGroupNames,e.regexIsValidFlags=regexIsValidFlags,e.regexLibrary=O,e.regexMatcherToValidater=regexMatcherToValidater,e.regexScopeTree=function regexScopeTree(e,t,r){const[n,o]=parseParam(t),[s,i]=parseParam(r);return funSetName(e,(function*(t,r=!1){const a=[...rexec(n,t)].concat([...rexec(s,t)]);a.sort(compareArray(((e,t)=>e.index-t.index)));const u=[],l=[];for(const n of a)if(o.test(n.match))l.push(n);else{if(!i.test(n.match))throw new Error("Match does not recognize itself as neither left nor right, which should be impossible.");{const o=l.pop();if(!o)continue;const s=n,i=l.length,a={type:e,parent:null,depth:i,left:o,right:s,between:{index:o.lastIndex,lastIndex:s.index,groups:{},match:t.substring(o.lastIndex,s.index)},children:[]};setNonEnumerable(a,"parent");for(let e=u.length-1;e>=0&&!(o.index>=u[e].left.index||s.lastIndex<=u[e].right.lastIndex);e--)a.children.push(u[e]),null===u[e].parent&&(u[e].parent=a);if(u.push(a),r&&i>0)continue;yield a}}}))},e.regexValidFlags=regexValidFlags,e.rexec=rexec,e.round=function round(e,t=0){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)+0},e.roundDown=function roundDown(e){return Math.floor(e)},e.roundUp=function roundUp(e){return Math.ceil(e)+0},e.setDifference=function setDifference(e,t){const r=new Set(e);for(const e of t)r.delete(e);return r},e.setEnumerable=function setEnumerable(e,...t){for(const r of t)Object.defineProperty(e,r,{enumerable:!0})},e.setIntersection=function setIntersection(e){const t=new Set(e[0].values());for(let r=1;r<e.length;r++)for(const n of t.values())e[r].has(n)||t.delete(n);return t},e.setIsSuperset=function setIsSuperset(e,t){for(const r of t)if(!e.has(r))return!1;return!0},e.setNonConfigurable=function setNonConfigurable(e,...t){for(const r of t)Object.defineProperty(e,r,{configurable:!1})},e.setNonEnumerable=setNonEnumerable,e.setNonEnumerablePrivateProperties=setNonEnumerablePrivateProperties,e.setNonWritable=function setNonWritable(e,...t){for(const r of t)Object.defineProperty(e,r,{writable:!1})},e.setSymmetricDifference=function setSymmetricDifference(e,t){const r=new Set(e);for(const e of t)r.has(e)?r.delete(e):r.add(e);return r},e.setUnion=function setUnion(e){const t=new Set(e[0].values());for(let r=1;r<e.length;r++)for(const n of e[r].values())t.add(n);return t},e.setValueAsGetter=function setValueAsGetter(e,...t){if(!e||"object"!=typeof e)throw new Error("setValueAsGetter() requires an object as the first argument.");for(const r of t){if(!Object.hasOwn(e,r))throw new Error(`Property '${r}' does not exist on object.`);const t=Object.getOwnPropertyDescriptor(e,r);if(!t)throw new Error(`Property '${r}' does not have a descriptor.`);const{value:n,enumerable:o,configurable:s}=t;Object.defineProperty(e,r,{configurable:s,enumerable:o,get:()=>n})}return e},e.setWritable=function setWritable(e,...t){for(const r of t)Object.defineProperty(e,r,{writable:!0})},e.strCountCharOccurances=strCountCharOccurances,e.strCountChars=function strCountChars(e){const t=new Map;for(const r of e){const e=t.get(r);t.set(r,e?e+1:1)}return t},e.strFirstCharToUpperCase=function strFirstCharToUpperCase(e){return e.charAt(0).toUpperCase()+e.substring(1)},e.strHash=$,e.strIsLowerCase=strIsLowerCase,e.strIsUpperCase=strIsUpperCase,e.strLinesRemoveEmpty=strLinesRemoveEmpty,e.strLinesTrimLeft=function strLinesTrimLeft(e){return e.replace(/\n\r?\s+/gm,"\n")},e.strLinesTrimRight=strLinesTrimRight,e.strParseBoolean=function strParseBoolean(e){return"true"===e.toLowerCase()},e.strPrettifyMinifiedCode=function strPrettifyMinifiedCode(e,t="  "){const getIndents=e=>strRepeat("\t",e);let r=0;return strLinesTrimRight(strLinesRemoveEmpty(Array.from(e).map((e=>"{"===e?(r++,"{\n"+getIndents(r)):"}"===e?(r--,"\n"+getIndents(r)+"}\n"+getIndents(r)):";"===e?";\n"+getIndents(r):e)).join(""))).replace(/\t +/g,"\t").replace(/\t/g,t)},e.strRemoveDuplicateChars=strRemoveDuplicateChars,e.strRepeat=strRepeat,e.strReplaceAll=function strReplaceAll(e,t,r,n="g"){return e.replace(new RegExp(regexEscapeString(t),n),r)},e.strSortChars=strSortChars,e.strSplitCamelCase=function strSplitCamelCase(e){const t=[],r=e.length-1;let n=0,o=!1;for(let s=1;s<e.length;s++)if(o&&s===r){const r=e.substring(n);r&&t.push(r)}else if(isCamelCaseWordBreakIndex(e,s)){const r=e.substring(n,s);if(!r)continue;t.push(r),n=s,o=!0}return o||t.push(e),t},e.strToCharCodes=function strToCharCodes(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r},e.strToCharSet=function strToCharSet(e){return Array.from(new Set(e)).sort().join("")},e.strToSentences=function strToSentences(e){return r.split(e).map((t=>{const[r,n]=t.range;return e.substring(r,n).replace(I," ").trim()})).filter((e=>!!e))},e.strToWords=function strToWords(e){return n.words(e)},e.strUnwrap=function strUnwrap(e,t,r,n=""){return e.replace(new RegExp("^"+regexEscapeString(t),n),"").replace(new RegExp(regexEscapeString(r)+"$",n),"")},e.strWrapBetween=function strWrapBetween(e,t,r){return t+e+r},e.strWrapIn=function strWrapIn(e,t){return t+e+t},e.strWrapInAngleBrackets=function strWrapInAngleBrackets(e){return"<"+e+">"},e.strWrapInBraces=function strWrapInBraces(e){return"{"+e+"}"},e.strWrapInBrackets=function strWrapInBrackets(e){return"["+e+"]"},e.strWrapInDoubleQuotes=function strWrapInDoubleQuotes(e){return'"'+e+'"'},e.strWrapInParenthesis=function strWrapInParenthesis(e){return"("+e+")"},e.strWrapInSingleQuotes=function strWrapInSingleQuotes(e){return"'"+e+"'"},e.streamToString=async function streamToString(e){const t=[];for await(const r of e)t.push(Buffer.from(r).toString());return t.join("")},e.trimArrayBytesLeft=function trimArrayBytesLeft(e){return 0===e[0]?0===e[1]?0===e[2]?[e[3]]:[e[2],e[3]]:[e[1],e[2],e[3]]:e},e.trimArrayBytesRight=function trimArrayBytesRight(e){return 0===e[3]?0===e[2]?0===e[1]?[e[0]]:[e[0],e[1]]:[e[0],e[1],e[2]]:e},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
